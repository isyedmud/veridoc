{"version":3,"sources":["webpack:///./src/app/pages/admin/admin-requests/admin-requests.module.ts","webpack:///./src/app/pages/admin/admin-requests/admin-requests.page.html","webpack:///./src/app/pages/admin/admin-requests/admin-requests.page.scss","webpack:///./src/app/pages/admin/admin-requests/admin-requests.page.ts"],"names":[],"mappings":"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","file":"admin-admin-requests-admin-requests-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AdminRequestsPage } from './admin-requests.page';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AdminRequestsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [AdminRequestsPage]\n})\nexport class AdminRequestsPageModule {}\n","module.exports = \"<ion-header>\\n    <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-button fill=\\\"clear\\\" (click)=\\\"onClickNavBack()\\\">\\n          <ion-icon name=\\\"arrow-back\\\"></ion-icon>\\n        </ion-button>\\n      </ion-buttons>\\n      <ion-title>All Requests</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  \\n  <ion-content>\\n    <div id=\\\"admin-requests-list\\\">\\n      <div *ngFor=\\\"let request of arrRequests; let i = index;\\\" class=\\\"admin-requests-item\\\">\\n        <div class=\\\"admin-request-item-header\\\">\\n          <p>\\n            {{request._id}}\\n          </p>\\n        </div>\\n        <div class=\\\"admin-request-item-content\\\">\\n          <p>\\n            Status: {{arrStatus[request.status]}}\\n          </p>\\n          <p>\\n            Comments: {{request.comments}}\\n          </p>\\n          <p>\\n            Queries: {{request.queries}}\\n          </p>\\n          <p>\\n            Requestor: \\n          </p>\\n          <ion-item lines=\\\"none\\\" (click)=\\\"onToggleViewAttachment(i)\\\">\\n            <ion-icon *ngIf=\\\"!request.expanded\\\" name=\\\"arrow-dropright\\\"></ion-icon>\\n            <ion-icon *ngIf=\\\"request.expanded\\\" name=\\\"arrow-dropdown\\\"></ion-icon>\\n            <ion-label>View Attachments</ion-label>\\n          </ion-item>\\n          <ion-list *ngIf=\\\"request.expanded\\\" no-padding>\\n            <div *ngFor=\\\"let file of request.files\\\">\\n              <p (click)=\\\"onClickAttachments(file.filename)\\\">\\n                {{file.filename}}\\n              </p>\\n            </div>\\n          </ion-list>\\n          <div class=\\\"admin-requests-controllers-container\\\">\\n            <p (click)=\\\"onClickSentToRequestor(request)\\\">\\n              Send To Requestor\\n            </p>\\n            <p (click)=\\\"onClickBackToReviewer(request)\\\">\\n              Back To Reviewer\\n            </p>\\n            <p (click)=\\\"onClickAbort(request)\\\">\\n              Abort Request\\n            </p>\\n          </div>\\n        </div>\\n        <div class=\\\"admin-request-item-footer\\\">\\n          <p>\\n            Created At: {{request.createdAt | doctime}}\\n          </p>\\n        </div>\\n      </div>\\n    </div>\\n  </ion-content>\\n  <ion-footer>\\n    <ion-toolbar (click)=\\\"onClickAllCases()\\\">\\n      <ion-title>All Cases</ion-title>\\n    </ion-toolbar>\\n  </ion-footer>\"","module.exports = \"ion-footer ion-title {\\n  text-align: center; }\\n\\n#admin-requests-list {\\n  margin: 16px; }\\n\\n.admin-requests-item {\\n  box-shadow: 0 2px 4px #b3b3b3;\\n  margin-bottom: 2vh; }\\n\\n.admin-request-item-header {\\n  background-color: #3780ff; }\\n\\n.admin-request-item-header p {\\n    margin: 0;\\n    padding: 16px;\\n    color: white;\\n    text-align: left; }\\n\\n.admin-request-item-content {\\n  margin: 16px; }\\n\\n.admin-request-item-footer {\\n  padding: 0 16px 16px 16px; }\\n\\n.admin-request-item-footer p {\\n    margin: 0;\\n    font-size: .8em;\\n    text-align: right; }\\n\\n.admin-requests-controllers-container {\\n  display: flex; }\\n\\n.admin-requests-controllers-container p {\\n    flex: 1;\\n    text-align: center;\\n    font-size: .8em;\\n    color: #144abe;\\n    text-decoration: underline;\\n    cursor: pointer; }\\n\\nion-list {\\n  margin-left: 32px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0RhdGExL1dvcmtzcGFjZS9pb25pYy92ZXJpZG9jL3NyYy9hcHAvcGFnZXMvYWRtaW4vYWRtaW4tcmVxdWVzdHMvYWRtaW4tcmVxdWVzdHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBRVEsa0JBQWtCLEVBQUE7O0FBSTFCO0VBQ0ksWUFBWSxFQUFBOztBQUdoQjtFQUNJLDZCQUE2QjtFQUM3QixrQkFBa0IsRUFBQTs7QUFHdEI7RUFDSSx5QkFBeUIsRUFBQTs7QUFEN0I7SUFHUSxTQUFTO0lBQ1QsYUFBYTtJQUNiLFlBQVk7SUFDWixnQkFBZ0IsRUFBQTs7QUFJeEI7RUFDSSxZQUFZLEVBQUE7O0FBR2hCO0VBQ0kseUJBQXlCLEVBQUE7O0FBRDdCO0lBR1EsU0FBUztJQUNULGVBQWU7SUFDZixpQkFBaUIsRUFBQTs7QUFJekI7RUFDSSxhQUFhLEVBQUE7O0FBRGpCO0lBR1EsT0FBTztJQUNQLGtCQUFrQjtJQUNsQixlQUFlO0lBQ2YsY0FBdUI7SUFDdkIsMEJBQTBCO0lBQzFCLGVBQWUsRUFBQTs7QUFJdkI7RUFDSSxpQkFBaUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2FkbWluL2FkbWluLXJlcXVlc3RzL2FkbWluLXJlcXVlc3RzLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1mb290ZXIge1xuICAgIGlvbi10aXRsZSB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG59XG5cbiNhZG1pbi1yZXF1ZXN0cy1saXN0IHtcbiAgICBtYXJnaW46IDE2cHg7XG59XG5cbi5hZG1pbi1yZXF1ZXN0cy1pdGVtIHtcbiAgICBib3gtc2hhZG93OiAwIDJweCA0cHggI2IzYjNiMztcbiAgICBtYXJnaW4tYm90dG9tOiAydmg7XG59XG5cbi5hZG1pbi1yZXF1ZXN0LWl0ZW0taGVhZGVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMzc4MGZmO1xuICAgIHAge1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHBhZGRpbmc6IDE2cHg7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcbiAgICB9XG59XG5cbi5hZG1pbi1yZXF1ZXN0LWl0ZW0tY29udGVudCB7XG4gICAgbWFyZ2luOiAxNnB4O1xufVxuXG4uYWRtaW4tcmVxdWVzdC1pdGVtLWZvb3RlciB7XG4gICAgcGFkZGluZzogMCAxNnB4IDE2cHggMTZweDtcbiAgICBwIHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBmb250LXNpemU6IC44ZW07XG4gICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgIH1cbn1cblxuLmFkbWluLXJlcXVlc3RzLWNvbnRyb2xsZXJzLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICBmb250LXNpemU6IC44ZW07XG4gICAgICAgIGNvbG9yOiByZ2IoMjAsIDc0LCAxOTApO1xuICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIH1cbn1cblxuaW9uLWxpc3Qge1xuICAgIG1hcmdpbi1sZWZ0OiAzMnB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { NavController, LoadingController, Platform } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api/api.service';\nimport { saveAs } from 'file-saver';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { SERVERASSETS, STATUS } from '../../constants';\n\n@Component({\n  selector: 'app-admin-requests',\n  templateUrl: './admin-requests.page.html',\n  styleUrls: ['./admin-requests.page.scss'],\n})\nexport class AdminRequestsPage implements OnInit {\n\n  private arrRequests = [];\n  private arrStatus = STATUS;\n\n  constructor(\n    private navCtrl: NavController,\n    private loadingCtrl: LoadingController,\n    private apiService: ApiService,\n    private platform: Platform,\n    private file: File,\n    private transfer: FileTransfer\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    this.initPage();\n  }\n\n  async initPage() {\n    const requestLoader = await this.loadingCtrl.create({\n      message: \"Loading...\"\n    });\n    await requestLoader.present();\n\n    this.arrRequests = [];\n    this.apiService.getAllRequests()\n      .subscribe((res: any) => {\n        if(res.data) {\n          for(let i = 0; i < res.data.length; i++) {\n            if(res.data[i].status == 0) {\n              this.arrRequests.push({...res.data[i], expanded: false});\n            }\n          }\n        }\n        requestLoader.dismiss();\n        console.log(this.arrRequests);\n      }, error => {\n        console.log(error);\n        requestLoader.dismiss();\n      })\n  }\n\n  onToggleViewAttachment(i) {\n    this.arrRequests[i].expanded = !this.arrRequests[i].expanded;\n  }\n\n  async onClickAttachments(filename) {\n    let isMobile = this.platform.is(\"mobile\");\n    if(isMobile) {\n      const fileTransfer: FileTransferObject = this.transfer.create();\n      try {\n        await fileTransfer.download(SERVERASSETS + filename, this.file.externalRootDirectory + 'Download/' + filename);\n      } catch(err) {\n        console.log(err);\n      }\n    } else {\n      this.apiService.downloadFile(filename)\n      .subscribe((data) => {\n        console.log(data);\n        saveAs(data, filename);\n      }, error => {\n        console.log(error);\n      })\n    }\n  }\n\n  /**\n   * Assign to expert\n   * @param request Request Object\n   */\n  onClickSentToRequestor(request) {\n    if(request.status == 2) {\n      alert(\"This Request is already closed!\");\n      return;\n    }\n    console.log(request);\n  }\n\n  /**\n   * Request is ignored\n   * @param request Request Object\n   */\n  onClickBackToReviewer(request) {\n    if(request.status == 2) {\n      alert(\"This Request is already closed!\");\n      return;\n    }\n    console.log(request);\n  }\n\n  /**\n   * Abort Request\n   * @param request \n   */\n  onClickAbort(request) {\n    if(request.status == 2) {\n      alert(\"This Request is already closed!\");\n      return;\n    }\n    console.log(request);\n  }\n\n  onClickAllCases() {\n    this.navCtrl.navigateForward('/menu/adminallcases');\n  }\n\n  onClickNavBack() {\n    this.navCtrl.navigateBack('/menu/landing');\n  }\n\n}\n"],"sourceRoot":""}