{"version":3,"sources":["webpack:///./src/app/pages/expert/request/request.module.ts","webpack:///./src/app/pages/expert/request/request.page.html","webpack:///./src/app/pages/expert/request/request.page.scss","webpack:///./src/app/pages/expert/request/request.page.ts"],"names":[],"mappings":"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","file":"expert-request-request-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RequestPage } from './request.page';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RequestPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PipesModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RequestPage]\n})\nexport class RequestPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button fill=\\\"clear\\\" (click)=\\\"onClickNavBack()\\\">\\n        <ion-icon name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>Requests</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <div id=\\\"request-list\\\">\\n    <div *ngFor=\\\"let request of arrRequests; let i = index;\\\" class=\\\"request-item\\\">\\n      <div class=\\\"request-item-header\\\">\\n        <p>\\n          {{request._id}}\\n        </p>\\n        <div>\\n          <ion-button fill=\\\"clear\\\" color=\\\"white\\\" (click)=\\\"onClickReview(i)\\\">\\n            <ion-icon name=\\\"checkmark\\\"></ion-icon>\\n          </ion-button>\\n        </div>\\n      </div>\\n      <div class=\\\"request-item-content\\\">\\n        <p>\\n          Comments: {{request.comments}}\\n        </p>\\n        <p>\\n          Queries: {{request.queries}}\\n        </p>\\n        <ion-item lines=\\\"none\\\" (click)=\\\"onToggleViewAttachment(i)\\\">\\n          <ion-icon *ngIf=\\\"!request.expanded\\\" name=\\\"arrow-dropright\\\"></ion-icon>\\n          <ion-icon *ngIf=\\\"request.expanded\\\" name=\\\"arrow-dropdown\\\"></ion-icon>\\n          <ion-label>View Attachments</ion-label>\\n        </ion-item>\\n        <ion-list *ngIf=\\\"request.expanded\\\" no-padding>\\n          <div *ngFor=\\\"let file of request.files\\\">\\n            <p (click)=\\\"onClickAttachments(file.filename)\\\">\\n              {{file.filename}}\\n            </p>\\n          </div>\\n        </ion-list>\\n      </div>\\n      <div class=\\\"request-item-footer\\\">\\n        <p>\\n          Created At: {{request.createdAt | doctime}}\\n        </p>\\n      </div>\\n    </div>\\n  </div>\\n</ion-content>\\n<ion-footer>\\n  <ion-toolbar (click)=\\\"onClickReviewedCases()\\\">\\n    <ion-title>Reviewd Cases</ion-title>\\n  </ion-toolbar>\\n</ion-footer>\\n\"","module.exports = \"ion-footer ion-title {\\n  text-align: center; }\\n\\n#request-list {\\n  margin: 16px; }\\n\\n.request-item {\\n  box-shadow: 0 2px 4px #b3b3b3;\\n  margin-bottom: 2vh; }\\n\\n.request-item-header {\\n  background-color: #3780ff;\\n  display: flex; }\\n\\n.request-item-header p {\\n    flex: 1;\\n    margin: 0;\\n    padding: 16px;\\n    color: white;\\n    text-align: left; }\\n\\n.request-item-header div {\\n    flex: 1;\\n    display: flex;\\n    justify-content: flex-end;\\n    align-items: center; }\\n\\n.request-item-content {\\n  margin: 16px; }\\n\\n.request-item-footer {\\n  padding: 0 16px 16px 16px; }\\n\\n.request-item-footer p {\\n    margin: 0;\\n    font-size: .8em;\\n    text-align: right; }\\n\\nion-list {\\n  margin-left: 32px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0RhdGExL1dvcmtzcGFjZS9pb25pYy92ZXJpZG9jL3NyYy9hcHAvcGFnZXMvZXhwZXJ0L3JlcXVlc3QvcmVxdWVzdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFFUSxrQkFBa0IsRUFBQTs7QUFJMUI7RUFDSSxZQUFZLEVBQUE7O0FBR2hCO0VBQ0ksNkJBQTZCO0VBQzdCLGtCQUFrQixFQUFBOztBQUd0QjtFQUNJLHlCQUF5QjtFQUN6QixhQUFhLEVBQUE7O0FBRmpCO0lBSVEsT0FBTztJQUNQLFNBQVM7SUFDVCxhQUFhO0lBQ2IsWUFBWTtJQUNaLGdCQUFnQixFQUFBOztBQVJ4QjtJQVdRLE9BQU87SUFDUCxhQUFhO0lBQ2IseUJBQXlCO0lBQ3pCLG1CQUFtQixFQUFBOztBQUkzQjtFQUNJLFlBQVksRUFBQTs7QUFHaEI7RUFDSSx5QkFBeUIsRUFBQTs7QUFEN0I7SUFHUSxTQUFTO0lBQ1QsZUFBZTtJQUNmLGlCQUFpQixFQUFBOztBQUl6QjtFQUNJLGlCQUFpQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvZXhwZXJ0L3JlcXVlc3QvcmVxdWVzdC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tZm9vdGVyIHtcbiAgICBpb24tdGl0bGUge1xuICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgfVxufVxuXG4jcmVxdWVzdC1saXN0IHtcbiAgICBtYXJnaW46IDE2cHg7XG59XG5cbi5yZXF1ZXN0LWl0ZW0ge1xuICAgIGJveC1zaGFkb3c6IDAgMnB4IDRweCAjYjNiM2IzO1xuICAgIG1hcmdpbi1ib3R0b206IDJ2aDtcbn1cblxuLnJlcXVlc3QtaXRlbS1oZWFkZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICMzNzgwZmY7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBwIHtcbiAgICAgICAgZmxleDogMTtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBwYWRkaW5nOiAxNnB4O1xuICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgfVxuICAgIGRpdiB7XG4gICAgICAgIGZsZXg6IDE7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgfVxufVxuXG4ucmVxdWVzdC1pdGVtLWNvbnRlbnQge1xuICAgIG1hcmdpbjogMTZweDtcbn1cblxuLnJlcXVlc3QtaXRlbS1mb290ZXIge1xuICAgIHBhZGRpbmc6IDAgMTZweCAxNnB4IDE2cHg7XG4gICAgcCB7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgZm9udC1zaXplOiAuOGVtO1xuICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICB9XG59XG5cbmlvbi1saXN0IHtcbiAgICBtYXJnaW4tbGVmdDogMzJweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NavController, LoadingController, Platform } from '@ionic/angular';\nimport { ApiService } from 'src/app/services/api/api.service';\nimport { saveAs } from 'file-saver';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { SERVERASSETS } from '../../constants';\n\n@Component({\n  selector: 'app-request',\n  templateUrl: './request.page.html',\n  styleUrls: ['./request.page.scss'],\n})\nexport class RequestPage implements OnInit {\n\n  private arrRequests = [];\n\n\n  constructor(\n    private navCtrl: NavController,\n    private apiService: ApiService,\n    private loadingCtrl: LoadingController,\n    private platform: Platform,\n    private file: File,\n    private transfer: FileTransfer\n  ) { }\n\n  ngOnInit() {\n  }\n\n  ionViewWillEnter() {\n    this.initPage();\n  }\n\n  /**\n   * Init Page when it's loaded\n   */\n  async initPage() {\n    const requestLoader = await this.loadingCtrl.create({\n      message: \"Loading...\"\n    });\n    await requestLoader.present();\n\n    try {\n      this.apiService.getAllRequests()\n        .subscribe((res: any) => {\n          this.arrRequests = [];\n          if(res.data) {\n            for(let i = 0; i < res.data.length; i++) {\n              if(res.data[i].status == 0) {\n                this.arrRequests.push({...res.data[i], expanded: false});\n              }\n            }\n          }\n          requestLoader.dismiss();\n        })\n    } catch(err) {\n      console.log(err);\n      requestLoader.dismiss();\n    }\n  }\n\n  /**\n   * Toggle to view attachments\n   * @param i array index of arrRequests\n   */\n  onToggleViewAttachment(i) {\n    this.arrRequests[i].expanded = !this.arrRequests[i].expanded;\n  }\n\n  /**\n   * Download attachment file\n   * Check platform, so if platform is mobile, then, use cordova plugin\n   * if platform is not mobile, then, use file-saver.js\n   * @param filename the name of file to download\n   */\n  async onClickAttachments(filename) {\n    let isMobile = this.platform.is(\"mobile\");\n    if(isMobile) {\n      const fileTransfer: FileTransferObject = this.transfer.create();\n      try {\n        await fileTransfer.download(SERVERASSETS + filename, this.file.externalRootDirectory + 'Download/' + filename);\n      } catch(err) {\n        console.log(err);\n      }\n    } else {\n      this.apiService.downloadFile(filename)\n      .subscribe((data) => {\n        console.log(data);\n        saveAs(data, filename);\n      }, error => {\n        console.log(error);\n      })\n    }\n  }\n\n  /**\n   * Assign request to expert\n   * @param index the index of arrRequests array\n   */\n  async onClickReview(index) {\n    const data = {\n      expertId: localStorage.getItem(\"uid\"),\n      requestId: this.arrRequests[index]._id\n    };\n\n    const setLoader = await this.loadingCtrl.create({\n      message: \"Please wait...\"\n    });\n    await setLoader.present();\n    \n    try {\n      this.apiService.requestSetExpert(data)\n        .subscribe((data) => {\n          setLoader.dismiss();\n          this.initPage();\n        });\n    } catch(err) {\n      console.log(err);\n      setLoader.dismiss();\n    }\n  }\n\n  /**\n   * navigate to view document page\n   * @param index request array index\n   */\n  onClickViewDocs(index) {\n\n  }\n\n  /**\n   * Navigate to Revied Case page\n   */\n  onClickReviewedCases() {\n    this.navCtrl.navigateForward('/reviewed-cases');\n  }\n\n  /**\n   * Navigate to landing page\n   */\n  onClickNavBack() {\n    this.navCtrl.navigateBack('/menu/landing');\n  }\n\n}\n"],"sourceRoot":""}